"use strict";function _classCallCheck(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,i){for(var e=0;e<i.length;e++){var t=i[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(i,e,t){return e&&n(i.prototype,e),t&&n(i,t),i}}();!function(){var n=function(){function n(){var i=this;_classCallCheck(this,n),window.Engine.Config.is_dev()&&(this.fps_meter=new FPSMeter),this.renderer=PIXI.autoDetectRenderer(window.Engine.Window.width,window.Engine.Window.height,{}),document.body.appendChild(this.renderer.view),this.main_stage=new PIXI.Container,this.animate(),window.Engine.Window.on_resize(function(){i.renderer.resize(window.Engine.Window.width,window.Engine.Window.height)})}return _createClass(n,[{key:"animate",value:function(){var n=this;window.Engine.Config.is_dev()&&this.fps_meter.tick(),this.renderer.render(this.main_stage),window.requestAnimationFrame(function(){n.animate()})}}]),n}();void 0===window.Engine&&(window.Engine={}),window.Engine.Application=n}(),function(){var n=function(){function n(){_classCallCheck(this,n),this.env="dev"}return _createClass(n,[{key:"is_test",value:function(){return"test"==this.env?!0:void 0}},{key:"is_dev",value:function(){return"dev"==this.env?!0:void 0}},{key:"is_prod",value:function(){return"prod"==this.env?!0:void 0}}]),n}();void 0===window.Engine&&(window.Engine={}),window.Engine.Config=new n}(),function(){var n=function(){function n(){var i=this;_classCallCheck(this,n),this.keys=[],this.codes={LEFT:37,UP:38,RIGHT:39,DOWN:40,A:65,W:87,D:68,S:83},document.addEventListener("keydown",function(n){i.on_keydown(n.keyCode)}),document.addEventListener("keyup",function(n){i.on_keyup(n.keyCode)})}return _createClass(n,[{key:"on_keydown",value:function(n){this.is_down(n)||this.keys.push(n)}},{key:"on_keyup",value:function(n){this.is_down(n)&&this.keys.splice(this.keys.indexOf(n),1)}},{key:"is_down",value:function(n){return this.keys[n]&&(n=this.keys[n]),-1==this.keys.indexOf(n)?!1:!0}}]),n}();void 0===window.Engine&&(window.Engine={}),window.Engine.Key=new n}(),function(){var n=function(){function n(){_classCallCheck(this,n)}return _createClass(n,null,[{key:"to_iso",value:function(n){return{x:(n.x-n.y)/2,y:(n.x+n.y)/2}}}]),n}();void 0===window.Engine&&(window.Engine={}),window.Engine.Point=n}(),function(){var n=function(){function n(){var i=this;_classCallCheck(this,n),this.height=window.innerHeight,this.width=window.innerWidth,this.callback_function=function(){},this.timeout=void 0,window.onresize=function(){i.resize_callback()}}return _createClass(n,[{key:"resize_callback",value:function(){var n=this;void 0!=this.timeout&&(window.clearTimeout(this.timeout),this.timeout=void 0),this.timeout=window.setTimeout(function(){n.height=window.innerHeight,n.width=window.innerWidth,n.callback_function()},50)}},{key:"on_resize",value:function(n){this.callback_function=n}}]),n}();void 0===window.Engine&&(window.Engine={}),window.Engine.Window=new n}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGxpY2F0aW9uLmpzIiwiYXBwbGljYXRpb24uZXM2IiwiY29uZmlnL2RlZmF1bHQuZXM2IiwiZW5naW5lL2tleS5lczYiLCJlbmdpbmUvcG9pbnQuZXM2IiwiZW5naW5lL3dpbmRvdy5lczYiXSwibmFtZXMiOlsiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJBcHBsaWNhdGlvbiIsIl90aGlzIiwidGhpcyIsIndpbmRvdyIsIkVuZ2luZSIsIkNvbmZpZyIsImlzX2RldiIsImZwc19tZXRlciIsIkZQU01ldGVyIiwicmVuZGVyZXIiLCJQSVhJIiwiYXV0b0RldGVjdFJlbmRlcmVyIiwiV2luZG93Iiwid2lkdGgiLCJoZWlnaHQiLCJkb2N1bWVudCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsInZpZXciLCJtYWluX3N0YWdlIiwiQ29udGFpbmVyIiwiYW5pbWF0ZSIsIm9uX3Jlc2l6ZSIsInJlc2l6ZSIsInZhbHVlIiwiX3RoaXMyIiwidGljayIsInJlbmRlciIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInVuZGVmaW5lZCIsImVudiIsIktleSIsIl90aGlzMyIsImtleXMiLCJjb2RlcyIsIkxFRlQiLCJVUCIsIlJJR0hUIiwiRE9XTiIsIkEiLCJXIiwiRCIsIlMiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsIm9uX2tleWRvd24iLCJrZXlDb2RlIiwib25fa2V5dXAiLCJrZXlfY29kZSIsImlzX2Rvd24iLCJwdXNoIiwic3BsaWNlIiwiaW5kZXhPZiIsIlBvaW50IiwicG9pbnQiLCJ4IiwieSIsIl90aGlzNCIsImlubmVySGVpZ2h0IiwiaW5uZXJXaWR0aCIsImNhbGxiYWNrX2Z1bmN0aW9uIiwidGltZW91dCIsIm9ucmVzaXplIiwicmVzaXplX2NhbGxiYWNrIiwiX3RoaXM1IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCJdLCJtYXBwaW5ncyI6IkFBQUEsWUFJQSxTQUFTQSxpQkFBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FGaEgsR0FBSUMsY0FBZSxXQUFlLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsT0NGamlCLFdET0UsR0NORmtCLEdBQUEsV0FDQSxRQURBQSxLRFFNLEdBQUlDLEdBQVFDLElBRVp0QixpQkFBZ0JzQixLQ1Z0QkYsR0FFQUcsT0FBQUMsT0FBQUMsT0FBQUMsV0FDQUosS0FBQUssVUFBQSxHQUFBQyxXQUdBTixLQUFBTyxTQUFBQyxLQUFBQyxtQkFDQVIsT0FBQUMsT0FBQVEsT0FBQUMsTUFDQVYsT0FBQUMsT0FBQVEsT0FBQUUsV0FHQUMsU0FBQUMsS0FBQUMsWUFBQWYsS0FBQU8sU0FBQVMsTUFDQWhCLEtBQUFpQixXQUFBLEdBQUFULE1BQUFVLFVBQ0FsQixLQUFBbUIsVUFFQWxCLE9BQUFDLE9BQUFRLE9BQUFVLFVBQUEsV0FDQXJCLEVBQUFRLFNBQUFjLE9BQ0FwQixPQUFBQyxPQUFBUSxP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QkEvRSxjS3BNSjRCLElMcU1NaEIsSUFBSyxrQkFDTDRCLE1LekxOLFdMMExRLEdBQUl3QyxHQUFTOUQsSUt6THJCMkIsU0FBQTNCLEtBQUEyRCxVQUNBMUQsT0FBQThELGFBQUEvRCxLQUFBMkQsU0FDQTNELEtBQUEyRCxRQUFBaEMsUUFHQTNCLEtBQUEyRCxRQUFBMUQsT0FBQStELFdBQUEsV0FDQUYsRUFBQWxELE9BQUFYLE9BQUF1RCxZQUNBTSxFQUFBbkQsTUFBQVYsT0FBQXdELFdBRUFLLEVBQUFKLHFCQUNBLE9MOExNaEUsSUFBSyxZQUNMNEIsTUs1TE4sU0FBQW9DLEdBQ0ExRCxLQUFBMEQsa0JBQUFBLE1BNUJBaEQsSUFnQ0FpQixVQUFBMUIsT0FBQUMsU0FDQUQsT0FBQUMsV0FHQUQsT0FBQUMsT0FBQVEsT0FBQSxHQUFBQSIsImZpbGUiOiJhcHBsaWNhdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbbnVsbCwiKGZ1bmN0aW9uKCl7XG4gIGNsYXNzIEFwcGxpY2F0aW9uIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgIGlmICh3aW5kb3cuRW5naW5lLkNvbmZpZy5pc19kZXYoKSkge1xuICAgICAgICB0aGlzLmZwc19tZXRlciA9IG5ldyBGUFNNZXRlcigpO1xuICAgICAgfTtcblxuICAgICAgdGhpcy5yZW5kZXJlciA9IFBJWEkuYXV0b0RldGVjdFJlbmRlcmVyKFxuICAgICAgICB3aW5kb3cuRW5naW5lLldpbmRvdy53aWR0aCxcbiAgICAgICAgd2luZG93LkVuZ2luZS5XaW5kb3cuaGVpZ2h0LFxuICAgICAgICB7fVxuICAgICAgKTtcbiAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy5yZW5kZXJlci52aWV3KTtcbiAgICAgIHRoaXMubWFpbl9zdGFnZSA9IG5ldyBQSVhJLkNvbnRhaW5lcigpO1xuICAgICAgdGhpcy5hbmltYXRlKCk7XG5cbiAgICAgIHdpbmRvdy5FbmdpbmUuV2luZG93Lm9uX3Jlc2l6ZSgoKSA9PiB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIucmVzaXplKFxuICAgICAgICAgIHdpbmRvdy5FbmdpbmUuV2luZG93LndpZHRoLFxuICAgICAgICAgIHdpbmRvdy5FbmdpbmUuV2luZG93LmhlaWdodFxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgYW5pbWF0ZSgpIHtcbiAgICAgIGlmICh3aW5kb3cuRW5naW5lLkNvbmZpZy5pc19kZXYoKSkge1xuICAgICAgICB0aGlzLmZwc19tZXRlci50aWNrKCk7XG4gICAgICB9O1xuXG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbmRlcih0aGlzLm1haW5fc3RhZ2UpO1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICAgIHRoaXMuYW5pbWF0ZSgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgaWYod2luZG93LkVuZ2luZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgd2luZG93LkVuZ2luZSA9IHt9O1xuICB9XG5cbiAgd2luZG93LkVuZ2luZS5BcHBsaWNhdGlvbiA9IEFwcGxpY2F0aW9uO1xufSgpKTtcbiIsIihmdW5jdGlvbigpe1xuXG4gIGNsYXNzIENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICB0aGlzLmVudiA9ICdkZXYnO1xuICAgIH1cblxuICAgIGlzX3Rlc3QoKSB7XG4gICAgICBpZiAodGhpcy5lbnYgPT0gJ3Rlc3QnKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlzX2RldigpIHtcbiAgICAgIGlmICh0aGlzLmVudiA9PSAnZGV2Jykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpc19wcm9kKCkge1xuICAgICAgaWYgKHRoaXMuZW52ID09ICdwcm9kJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZih3aW5kb3cuRW5naW5lID09PSB1bmRlZmluZWQpIHtcbiAgICB3aW5kb3cuRW5naW5lID0ge307XG4gIH1cblxuICB3aW5kb3cuRW5naW5lLkNvbmZpZyA9IG5ldyBDb25maWcoKTtcblxufSgpKTtcbiIsIihmdW5jdGlvbigpe1xuXG4gIGNsYXNzIEtleSB7XG4gICAgY29uc3RydWN0b3IgKCkge1xuICAgICAgdGhpcy5rZXlzID0gW107XG4gICAgICB0aGlzLmNvZGVzID0ge1xuICAgICAgICAnTEVGVCc6IDM3LFxuICAgICAgICAnVVAnOiAzOCxcbiAgICAgICAgJ1JJR0hUJzogMzksXG4gICAgICAgICdET1dOJzogNDAsXG4gICAgICAgICdBJzogNjUsXG4gICAgICAgICdXJzogODcsXG4gICAgICAgICdEJzogNjgsXG4gICAgICAgICdTJzogODMsXG4gICAgICB9O1xuICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XG4gICAgICAgIHRoaXMub25fa2V5ZG93bihlLmtleUNvZGUpO1xuICAgICAgfSk7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIChlKSA9PiB7XG4gICAgICAgIHRoaXMub25fa2V5dXAoZS5rZXlDb2RlKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uX2tleWRvd24oa2V5X2NvZGUpIHtcbiAgICAgIGlmICghdGhpcy5pc19kb3duKGtleV9jb2RlKSkge1xuICAgICAgICB0aGlzLmtleXMucHVzaChrZXlfY29kZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgb25fa2V5dXAoa2V5X2NvZGUpIHtcbiAgICAgIGlmICh0aGlzLmlzX2Rvd24oa2V5X2NvZGUpKSB7XG4gICAgICAgIHRoaXMua2V5cy5zcGxpY2UodGhpcy5rZXlzLmluZGV4T2Yoa2V5X2NvZGUpLCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpc19kb3duKGtleV9jb2RlKSB7XG4gICAgICBpZiAodGhpcy5rZXlzW2tleV9jb2RlXSkge1xuICAgICAgICBrZXlfY29kZSA9IHRoaXMua2V5c1trZXlfY29kZV07XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5rZXlzLmluZGV4T2Yoa2V5X2NvZGUpID09IC0xKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmKHdpbmRvdy5FbmdpbmUgPT09IHVuZGVmaW5lZCkge1xuICAgIHdpbmRvdy5FbmdpbmUgPSB7fTtcbiAgfVxuICB3aW5kb3cuRW5naW5lLktleSA9IG5ldyBLZXk7XG4gIFxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuXG4gIGNsYXNzIFBvaW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICB9XG5cbiAgICBzdGF0aWMgdG9faXNvKHBvaW50KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICB4IDogKChwb2ludC54IC0gcG9pbnQueSkgLyAyKSxcbiAgICAgICAgeSA6ICgocG9pbnQueCArIHBvaW50LnkpIC8gMiksXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgfVxuXG4gIGlmKHdpbmRvdy5FbmdpbmUgPT09IHVuZGVmaW5lZCkge1xuICAgIHdpbmRvdy5FbmdpbmUgPSB7fTtcbiAgfVxuICB3aW5kb3cuRW5naW5lLlBvaW50ID0gUG9pbnQ7XG5cbn0oKSk7XG4iLCIoZnVuY3Rpb24oKXtcblxuICBjbGFzcyBXaW5kb3cge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgdGhpcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB0aGlzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG5cbiAgICAgIHRoaXMuY2FsbGJhY2tfZnVuY3Rpb24gPSAoKSA9PiB7fTtcbiAgICAgIHRoaXMudGltZW91dCA9IHVuZGVmaW5lZDtcblxuICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnJlc2l6ZV9jYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJlc2l6ZV9jYWxsYmFjaygpIHtcbiAgICAgIGlmICh0aGlzLnRpbWVvdXQgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy50aW1lb3V0KTtcbiAgICAgICAgdGhpcy50aW1lb3V0ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICB0aGlzLnRpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICB0aGlzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuXG4gICAgICAgIHRoaXMuY2FsbGJhY2tfZnVuY3Rpb24oKTtcbiAgICAgIH0sIDUwKTtcbiAgICB9XG5cbiAgICBvbl9yZXNpemUoY2FsbGJhY2tfZnVuY3Rpb24pIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tfZnVuY3Rpb24gPSBjYWxsYmFja19mdW5jdGlvbjtcbiAgICB9XG4gIH1cblxuICBpZih3aW5kb3cuRW5naW5lID09PSB1bmRlZmluZWQpIHtcbiAgICB3aW5kb3cuRW5naW5lID0ge307XG4gIH1cblxuICB3aW5kb3cuRW5naW5lLldpbmRvdyA9IG5ldyBXaW5kb3coKTtcblxufSgpKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==